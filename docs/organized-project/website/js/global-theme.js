!function(){"use strict";const e="stayfit_theme";async function t(){try{let t=null;try{const e=await fetch("/api/theme/load",{headers:{"X-User-Id":r()}});if(e.ok){const o=await e.json();o.success&&o.theme&&(t=o.theme,console.log("ðŸŽ¨ Theme loaded from server:",t.theme))}}catch(e){console.log("ðŸ“ Server theme unavailable, using localStorage")}if(!t){const o=localStorage.getItem(e);o&&(t=JSON.parse(o),console.log("ðŸŽ¨ Theme loaded from localStorage:",t.theme))}t&&t.theme?(o(t.theme),function(e){const t=document.documentElement;if(e.fontSize){const o={small:"14px",medium:"16px",large:"18px","extra-large":"20px"};t.style.setProperty("--base-font-size",o[e.fontSize]||"16px")}e.compactMode?t.classList.add("compact-mode"):t.classList.remove("compact-mode"),e.highContrast?t.classList.add("high-contrast"):t.classList.remove("high-contrast"),e.reducedMotion?t.classList.add("reduced-motion"):t.classList.remove("reduced-motion"),e.primaryColor&&t.style.setProperty("--primary-color",e.primaryColor),e.successColor&&t.style.setProperty("--success-color",e.successColor),e.warningColor&&t.style.setProperty("--warning-color",e.warningColor)}(t)):o("light")}catch(e){console.error("Error loading theme:",e),o("light")}}function o(e){console.log(`ðŸŽ¨ Applying theme: ${e}`),document.documentElement.setAttribute("data-theme",e);const t=document.documentElement;if("dark"===e)t.style.setProperty("--bg-primary","#1a1a1a"),t.style.setProperty("--bg-secondary","#2d2d2d"),t.style.setProperty("--bg-tertiary","#404040"),t.style.setProperty("--text-primary","#ffffff"),t.style.setProperty("--text-secondary","#b0b0b0"),t.style.setProperty("--text-muted","#6c757d"),t.style.setProperty("--border-color","#404040"),t.style.setProperty("--shadow-color","rgba(0, 0, 0, 0.3)"),t.style.setProperty("--input-bg","#2d2d2d"),t.style.setProperty("--input-border","#404040"),document.body.setAttribute("data-bs-theme","dark");else if("light"===e)t.style.setProperty("--bg-primary","#ffffff"),t.style.setProperty("--bg-secondary","#f8f9fa"),t.style.setProperty("--bg-tertiary","#e9ecef"),t.style.setProperty("--text-primary","#212529"),t.style.setProperty("--text-secondary","#6c757d"),t.style.setProperty("--text-muted","#adb5bd"),t.style.setProperty("--border-color","#dee2e6"),t.style.setProperty("--shadow-color","rgba(0, 0, 0, 0.1)"),t.style.setProperty("--input-bg","#ffffff"),t.style.setProperty("--input-border","#ced4da"),document.body.setAttribute("data-bs-theme","light");else if("auto"===e)return void o(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");window.currentTheme=e,window.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:e}})),console.log(`âœ… Theme applied: ${e}`)}function r(){return localStorage.getItem("stayfit_user_id")||"default-user"}function s(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){"auto"===window.currentTheme&&o("auto")})}window.StayFitTheme={getCurrentTheme:()=>window.currentTheme||"light",setTheme:t=>{o(t);const s={theme:t,lastUpdated:(new Date).toISOString()};localStorage.setItem(e,JSON.stringify(s)),async function(e){try{await fetch("/api/theme/save",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":r()},body:JSON.stringify(e)})}catch(e){console.log("Theme save to server failed (offline mode)")}}(s)},onThemeChange:e=>{window.addEventListener("themeChanged",e)},reload:()=>{t()}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){t(),s()}):(t(),s()),console.log("ðŸŽ¨ Global theme management initialized")}();