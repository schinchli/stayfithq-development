{
  "StayFitHealthCompanionPolicy": {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Sid": "TextractAccess",
        "Effect": "Allow",
        "Action": [
          "textract:AnalyzeDocument",
          "textract:DetectDocumentText",
          "textract:StartDocumentAnalysis",
          "textract:GetDocumentAnalysis"
        ],
        "Resource": "*"
      },
      {
        "Sid": "S3HealthDocuments",
        "Effect": "Allow",
        "Action": [
          "s3:GetObject",
          "s3:PutObject",
          "s3:DeleteObject",
          "s3:ListBucket"
        ],
        "Resource": [
          "arn:aws:s3:::stayfit-health-docs/*",
          "arn:aws:s3:::stayfit-health-docs"
        ]
      },
      {
        "Sid": "OpenSearchAccess",
        "Effect": "Allow",
        "Action": [
          "es:ESHttpGet",
          "es:ESHttpPost",
          "es:ESHttpPut",
          "es:ESHttpDelete",
          "es:ESHttpHead"
        ],
        "Resource": "arn:aws:es:*:*:domain/stayfit-health-search/*"
      },
      {
        "Sid": "BedrockAccess",
        "Effect": "Allow",
        "Action": [
          "bedrock:InvokeModel",
          "bedrock:InvokeModelWithResponseStream"
        ],
        "Resource": [
          "arn:aws:bedrock:*::foundation-model/anthropic.claude-3-sonnet-20240229-v1:0",
          "arn:aws:bedrock:*::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
        ]
      },
      {
        "Sid": "CognitoAccess",
        "Effect": "Allow",
        "Action": [
          "cognito-idp:AdminCreateUser",
          "cognito-idp:AdminSetUserPassword",
          "cognito-idp:AdminGetUser",
          "cognito-idp:ListUsers",
          "cognito-idp:AdminUpdateUserAttributes"
        ],
        "Resource": "arn:aws:cognito-idp:*:*:userpool/*"
      },
      {
        "Sid": "CloudWatchLogs",
        "Effect": "Allow",
        "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents",
          "logs:DescribeLogGroups",
          "logs:DescribeLogStreams"
        ],
        "Resource": "arn:aws:logs:*:*:log-group:/aws/lambda/stayfit-*"
      },
      {
        "Sid": "ElastiCacheAccess",
        "Effect": "Allow",
        "Action": [
          "elasticache:DescribeCacheClusters",
          "elasticache:DescribeReplicationGroups"
        ],
        "Resource": "*"
      }
    ]
  },
  "HIPAACompliancePolicy": {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Sid": "CloudTrailAccess",
        "Effect": "Allow",
        "Action": [
          "cloudtrail:CreateTrail",
          "cloudtrail:StartLogging",
          "cloudtrail:StopLogging",
          "cloudtrail:DescribeTrails"
        ],
        "Resource": "*"
      },
      {
        "Sid": "KMSAccess",
        "Effect": "Allow",
        "Action": [
          "kms:Encrypt",
          "kms:Decrypt",
          "kms:ReEncrypt*",
          "kms:GenerateDataKey*",
          "kms:DescribeKey"
        ],
        "Resource": "arn:aws:kms:*:*:key/*",
        "Condition": {
          "StringEquals": {
            "kms:ViaService": [
              "s3.*.amazonaws.com",
              "es.*.amazonaws.com"
            ]
          }
        }
      }
    ]
  }
}
